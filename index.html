<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find your path to #Fitter #Stronger #Better | COACH CHRIS</title>
    
    <!-- --- SOCIAL SHARING METADATA (OPEN GRAPH & TWITTER CARD) --- -->
    <meta property="og:title" content="Find your path to #Fitter #Stronger #Better">
    <meta property="og:description" content="Take our short quiz to determine which service is best suited to help you achieve your goals">
    <meta property="og:image" content="https://placehold.co/1200x630/22c55e/000?text=COACH+CHRIS+Fitness+Assessment">
    <meta property="og:url" content="YOUR_APP_URL_HERE">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Find your path to #Fitter #Stronger #Better">
    <meta name="twitter:description" content="Take our short quiz to determine which service is best suited to help you achieve your goals">
    <meta name="twitter:image" content="https://placehold.co/1200x630/22c55e/000?text=COACH+CHRIS+Fitness+Assessment">
    <!-- --- END SOCIAL SHARING METADATA --- -->

    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        /* --- LOADING SCREEN CSS --- */
        #initial-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease-out;
        }

        .loader-content {
            text-align: center;
            animation: pulse-slow 2s infinite ease-in-out;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .cycling-text {
            font-family: monospace;
            color: #22c55e; /* Green-500 */
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 1rem;
            min-height: 1.2em;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000; /* Black Background */
            color: #fff;
            background-image: radial-gradient(#222 1px, transparent 1px);
            background-size: 40px 40px;
        }

        /* --- BRANDING COMPONENTS --- */
        
        .quiz-container {
            max-width: 650px;
            min-height: 550px;
            background-color: #fff;
            color: #000;
            border: 4px solid #fff;
            box-shadow: 10px 10px 0 0 #333; 
            transition: all 0.3s ease-in-out;
        }

        .option-button {
            border: 2px solid #000;
            background-color: #fff;
            color: #000;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 0 0 0 #000;
        }

        .option-button:hover:not(.selected) {
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0 0 #000;
            background-color: #f3f4f6;
        }

        .selected {
            background-color: #000 !important;
            color: #fff !important;
            border-color: #000 !important;
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0 0 #22c55e !important;
        }

        .action-button {
            background-color: #22c55e;
            color: #000;
            border: 2px solid #000;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 4px 4px 0 0 #fff;
            transition: all 0.2s;
        }
        
        .action-button:hover:not(:disabled) {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 0 #fff;
        }
        
        .action-button:disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            border-color: #d1d5db;
            box-shadow: none;
            cursor: not-allowed;
        }
        
        .secondary-button {
            background-color: #fff; 
            color: #000;
            border: 2px solid #000;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 2px 2px 0 0 #000;
            transition: all 0.2s;
        }
        .secondary-button:hover {
            transform: translate(-1px, -1px);
            box-shadow: 3px 3px 0 0 #000;
        }
        
        .summary-secondary-button {
             background-color: #fff; 
            color: #000;
            border: 2px solid #000;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 4px 4px 0 0 #ccc;
            transition: all 0.2s;
        }
        .summary-secondary-button:hover {
            transform: translate(-1px, -1px);
            box-shadow: 5px 5px 0 0 #999;
        }

        .progress-container {
            background-color: #000; 
            height: 12px;
        }
        .progress-bar-fill {
            background-color: #22c55e;
            transition: width 0.3s ease-in-out;
        }

        .animate-in {
            animation: slideUpFade 0.4s ease-out;
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .custom-input {
            border: 2px solid #000;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        .custom-input:focus {
            outline: none;
            box-shadow: 4px 4px 0 0 #22c55e;
            border-color: #000;
        }
        
        input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 0.25rem; 
            transition: all 0.2s;
            cursor: pointer;
            border: 2px solid #000;
            background-color: #fff;
            outline: none;
            box-shadow: none;
        }
        input[type="checkbox"]:focus {
             box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.5); 
        }
        
        input[type="checkbox"]:checked {
            background-color: #22c55e; 
            border-color: #22c55e;
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 00-1.414 0L6.5 9.086 4.207 6.793a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l5-5a1 1 0 000-1.414z'/%3e%3c/svg%3e");
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .or-separator {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem; 
            font-weight: 900;    
            text-transform: uppercase;
            color: #000;
            margin: 1rem 0;      
        }
        
        .clean-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #e5e7eb; 
            border-top: 6px solid #22c55e; 
            border-radius: 50%;
            animation: spin 1s linear infinite;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.5); 
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 sm:p-6">

    <!-- SPLASH SCREEN LOADER -->
    <div id="initial-loader">
        <div class="loader-content flex flex-col items-center">
            <h1 class="text-4xl font-black text-white uppercase tracking-tighter italic" style="font-family: sans-serif;">
                COACHING QUIZ
            </h1>
            <div id="loader-pulse-text" class="text-green-500 font-bold text-xl uppercase tracking-widest mt-2" style="font-family: sans-serif;">
                Loading...
            </div>
            <div id="loader-sub-text" class="cycling-text">
                Initializing assessment...
            </div>
        </div>
    </div>

    <!-- Main Quiz Container -->
    <div id="quiz-app" class="quiz-container w-full rounded-2xl p-6 md:p-10 relative overflow-hidden">
        
        <!-- Decoration: Green accent line top -->
        <div class="absolute top-0 left-0 w-full h-2 bg-green-500"></div>

        <!-- BRANDING BLOCK -->
        <div class="mb-6 leading-tight animate-in">
            <h1 class="text-4xl sm:text-5xl font-black text-black uppercase tracking-tighter">
                COACH CHRIS
            </h1>
            <p class="text-lg font-extrabold uppercase text-neutral-600">
                CIRCULAR ROOTS COACHING
            </p>
            <p class="text-base font-extrabold uppercase text-neutral-700">
                TRAIN UNCNVNTNL
            </p>
        </div>

        <!-- Main Quiz Title -->
        <h2 class="text-3xl sm:text-4xl font-black text-black mb-4 uppercase italic tracking-tighter">
            FIND YOUR PATH TO BECOMING 
            <span class="text-green-500">#FITTER</span> 
            <span class="text-green-500">#STRONGER</span> 
            <span class="text-green-500">#BETTER</span>
        </h2>
        
        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex items-center space-x-3">
                <p id="progress-text-label" class="text-sm font-black uppercase tracking-widest text-black whitespace-nowrap">
                    QUESTION 1 OF 10
                </p>
                <div class="progress-container h-3 flex-grow rounded-full overflow-hidden">
                    <div id="progress-bar-fill" class="progress-bar-fill h-full" style="width: 0%;"></div>
                </div>
                <p id="progress-percent" class="text-sm font-black text-black whitespace-nowrap">
                    0%
                </p>
            </div>
        </div>

        <!-- Dynamic Content Area -->
        <div id="content-area">
            <div class="text-center font-bold animate-pulse">LOADING...</div>
        </div>

    </div>
    
    <!-- Footer Block -->
    <div class="mt-12 w-full max-w-2xl text-center px-4">
        <p id="disclaimer" class="text-neutral-400 text-sm mb-6 leading-relaxed">
            General Fitness Disclaimer: Always consult your medical professional or doctor before beginning any new fitness regime or making changes to your diet. This site provides general information for educational purposes only and is not intended to diagnose or treat any medical condition. You engage in physical activity at your own risk.
        </p>
        <p class="text-white font-black text-sm uppercase tracking-wider leading-snug">
            Â© 2025 COACH CHRIS | CIRCULAR ROOTS COACHING | TRAIN UNCNVNTNL. All rights reserved.
        </p>
        <p class="text-neutral-500 text-base italic font-medium mt-3">
            Fitter. Stronger. Better.
        </p>
    </div>


    <script>
        // Loading Screen Animation Logic
        window.addEventListener('load', () => {
            const loader = document.getElementById('initial-loader');
            const subText = document.getElementById('loader-sub-text');
            
            const cycleMessages = [
                "Loading quiz questions...",
                "Configuring assessment logic...",
                "Ready."
            ];
            
            let i = 0;
            const cycleInterval = setInterval(() => {
                if (i < cycleMessages.length) {
                    subText.textContent = cycleMessages[i];
                    i++;
                } else {
                    clearInterval(cycleInterval);
                }
            }, 500);

            setTimeout(() => {
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 500);
            }, 1800);
        });

        function markdownToHtml(text) {
            if (!text) return "";
            let result = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            result = result.replace(/\*(.*?)\*/g, '<em>$1</em>');
            return result;
        }

        const quizData = [
            { id: 1, question: "What is your #1 primary fitness goal right now?", key: "primaryGoal", options: [{ text: "Shedding fat and transforming my physique", score: 30 }, { text: "Getting strong and building solid muscle", score: 20 }, { text: "Boosting energy and improving my fitness/stamina", score: 10 }, { text: "Feeling generally healthier and more consistent", score: 5 }] },
            { id: 2, question: "How many days per week can you realistically commit?", key: "commitment", options: [{ text: "I'm ready for 5+ sessions per week (high commitment)", score: 30 }, { text: "I can commit 3-4 days a week easily", score: 20 }, { text: "1-2 days a week is realistic for me right now", score: 10 }, { text: "I need help finding consistency/just starting", score: 5 }] },
            { id: 3, question: "What is your biggest barrier to success?", key: "barrier", options: [{ text: "I don't have a plan that fits my goals", score: 5 }, { text: "I struggle with follow-through and need accountability", score: 20 }, { text: "My diet is my biggest weakness (need a strategy)", score: 30 }, { text: "Staying motivated and finding the time to train", score: 10 }] },
            { id: 4, question: "What level of support do you need?", key: "support", options: [{ text: "I need a great plan and I'll handle the rest", score: 5 }, { text: "I need weekly guidance and access to a coach", score: 20 }, { text: "Maximum accountability, check-ins, and a custom plan", score: 30 }, { text: "I learn best in a supportive group environment", score: 10 }] },
            { id: 5, question: "Do you have any injuries or medical considerations?", key: "medical", options: [{ text: "Yes, I have current injuries requiring specialized training", score: 30 }, { text: "I have minor aches but nothing that stops me from training", score: 20 }, { text: "No, I am generally fit and injury-free", score: 10 }, { text: "I'm not sure about my physical limitations yet", score: 5 }] },
            { id: 6, question: "What is your budget for coaching?", key: "budget", options: [{ text: "Â£150+ per month", score: 30 }, { text: "Up to Â£100 per month", score: 20 }, { text: "Up to Â£50 per month", score: 10 }, { text: "My budget is flexible", score: 25 }] },
            { id: 7, question: "Where do you primarily workout?", key: "location", options: [{ text: "A fully equipped gym/fitness center", score: 30 }, { text: "At home with minimal equipment", score: 10 }, { text: "Outdoors or using functional bodyweight training", score: 20 }, { text: "It varies (I travel or shift locations often)", score: 5 }] },
            { id: 8, question: "How would you describe your nutritional discipline?", key: "nutrition", options: [{ text: "I track macros/calories and just need refinement", score: 30 }, { text: "I eat generally healthy but need more structure", score: 20 }, { text: "My eating is inconsistent; I need a full overhaul", score: 10 }, { text: "I haven't focused on nutrition yet", score: 5 }] },
            { id: 9, question: "How crucial is guidance on daily habits and stress management?", key: "lifestyle", options: [{ text: "Essential (sleep and stress management are priorities)", score: 30 }, { text: "Important (I want it included in check-ins)", score: 20 }, { text: "Not crucial (I only need the workout programming)", score: 10 }, { text: "I am already highly disciplined in these areas", score: 5 }] },
            { id: 10, question: "What is your long-term health objective?", key: "longTerm", options: [{ text: "Maximize longevity and long-term vitality", score: 25 }, { text: "Improve aesthetics and physical appearance", score: 20 }, { text: "Perform at an elite level (sports/professional need)", score: 30 }, { text: "Maintain my current health and fitness level", score: 5 }] }
        ];

        let currentStep = 0;
        let totalScore = 0;
        let selectedOption = null;
        let userAnswers = []; 
        let clientName = "Warrior"; 

        const TIER_1_TITLE = "1-1 ONLINE COACHING";
        const TIER_2_TITLE = "FITTER STRONGER BETTER SUBSCRIPTION";
        const TIER_3_TITLE = "ONLINE PROGRAM LIBRARY";
        
        function getProgramDetailsByTitle(title) {
            if (title.includes(TIER_1_TITLE)) {
                return {
                    title: TIER_1_TITLE,
                    description: "Your goals require maximum accountability and highly specific programming. This is the premium, fully tailored solution designed to adapt to your lifestyle and ensure rapid, consistent progress.",
                    briefOverview: "Exclusive 1-on-1 coaching offering fully customized training and nutrition programming built specifically for you. Includes weekly in-depth check-ins, unlimited direct messaging with Coach Chris, and dynamic program adjustments.", 
                    accentColor: "text-green-600",
                    ctaLink: "https://coachchriscrc.github.io/oc-lp",
                    requiresCall: true
                };
            } else if (title.includes(TIER_2_TITLE)) {
                return {
                    title: TIER_2_TITLE,
                    description: "You have clear goals and a moderate level of commitment. This service provides structured programming, personalized check-ins, and a perfect blend of accountability and flexibility.",
                    briefOverview: "Access our Flagship Hybrid program (Strength, Endurance & Conditioning) via our dedicated app. This features custom nutrition targets, monthly progress check-ins with your coach, and ongoing community support.", 
                    accentColor: "text-blue-600",
                    ctaLink: "https://coachchriscrc.github.io/fsb-lp",
                    requiresCall: true
                };
            } else {
                return {
                    title: TIER_3_TITLE,
                    description: "You are seeking expert-designed, foundational guidance. Gain instant access to professionally built, self-paced training plans you can execute on your own schedule.",
                    briefOverview: "Gain self-guided access to a library of diverse programs, including strength cycles, conditioning blocks, and WOD packs. Features full tutorials and movement demosâ€”perfect for the independent trainee.", 
                    accentColor: "text-gray-800",
                    ctaLink: "https://coachchriscrc.github.io/programs-lp",
                    requiresCall: false
                };
            }
        }
        
        function getRecommendation(score) {
            const s = parseInt(score, 10); 
            if (s >= 230) return getProgramDetailsByTitle(TIER_1_TITLE);
            else if (s >= 145) return getProgramDetailsByTitle(TIER_2_TITLE);
            else return getProgramDetailsByTitle(TIER_3_TITLE);
        }
        
        function getAlternativeRecommendation(primaryRecommendationTitle) {
            if (primaryRecommendationTitle.includes(TIER_1_TITLE)) return getProgramDetailsByTitle(TIER_2_TITLE);
            else if (primaryRecommendationTitle.includes(TIER_2_TITLE)) return getProgramDetailsByTitle(TIER_3_TITLE);
            else return getProgramDetailsByTitle(TIER_2_TITLE);
        }
        
        function generatePersonalizedRationale(answers, recommendationTitle) {
            const rawGoal = answers.find(a => a.key === 'primaryGoal')?.answer || 'an ambitious fitness goal';
            const rawBarrier = answers.find(a => a.key === 'barrier')?.answer || 'a specific obstacle';
            
            let goalPhrase = rawGoal;
            if (rawGoal.includes("Shedding fat")) goalPhrase = "your focus on fat loss and physique transformation";
            else if (rawGoal.includes("Getting strong")) goalPhrase = "your objective of building muscle and strength";
            else if (rawGoal.includes("Boosting energy")) goalPhrase = "your desire for improved energy and endurance";
            else if (rawGoal.includes("Feeling generally healthier")) goalPhrase = "your goal of establishing consistent, healthy habits";

            let barrierPhrase = rawBarrier;
            if (rawBarrier.includes("don't have a plan")) barrierPhrase = "the lack of a structured program that fits your needs";
            else if (rawBarrier.includes("struggle with follow-through")) barrierPhrase = "a strong need for external accountability and regular coach feedback";
            else if (rawBarrier.includes("My diet is my biggest weakness")) barrierPhrase = "the challenge of optimizing your nutrition strategy";
            else if (rawBarrier.includes("Staying motivated")) barrierPhrase = "the difficulty of maintaining motivation and managing your training time";

            let keySupportFeature = '';
            if (recommendationTitle.includes(TIER_1_TITLE)) keySupportFeature = 'maximum 1-on-1 personalization and professional programming';
            else if (recommendationTitle.includes(TIER_2_TITLE)) keySupportFeature = 'structured programming paired with monthly individual check-ins';
            else keySupportFeature = 'immediate access to expert-designed training plans that remove the guesswork';

            let rationale = `We recognize <strong class="text-black">${goalPhrase}</strong> as your priority. `;
            rationale += `However, it appears your progress is currently hindered by <strong class="text-black">${barrierPhrase}</strong>. `;
            rationale += `The <strong>${recommendationTitle}</strong> is designed to overcome this by providing <strong class="text-black">${keySupportFeature}</strong> to ensure you achieve consistent, long-term results.`;
            
            return rationale;
        }

        function generateAlternativeDescription(primaryRec, alternativeRec) {
            const primaryTitle = primaryRec.title;
            let description = '';

            if (primaryTitle.includes(TIER_1_TITLE) && alternativeRec.title.includes(TIER_2_TITLE)) {
                description = `The **${TIER_2_TITLE}** offers an ideal balance of structure and support without the full 1-1 investment. It includes high-quality programming and direct coach check-insâ€”perfect for achieving consistency.`;
            } else if (primaryTitle.includes(TIER_2_TITLE) && alternativeRec.title.includes(TIER_3_TITLE)) {
                description = `If you prefer independent training or are working with a tighter budget, the **${TIER_3_TITLE}** provides expert-built plans. You gain instant access to programs designed to deliver results on your own schedule.`;
            } else if (primaryTitle.includes(TIER_3_TITLE) && alternativeRec.title.includes(TIER_2_TITLE)) {
                description = `If you feel you need more accountability than a self-paced plan provides, the **${TIER_2_TITLE}** adds monthly individual coach check-ins to ensure you stay on track and maximize your progress.`;
            } else {
                description = alternativeRec.description;
            }
            
            return markdownToHtml(description);
        }

        const contentArea = document.getElementById('content-area');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const progressTextLabel = document.getElementById('progress-text-label'); 
        const progressPercent = document.getElementById('progress-percent'); 

        function updateProgress() {
            const totalQuestions = quizData.length;
            const displayStep = currentStep === totalQuestions ? totalQuestions : currentStep + 1;
            const progress = (currentStep / totalQuestions) * 100;
            const percentageDisplay = Math.round(progress);

            progressBarFill.style.width = `${progress}%`;
            progressPercent.textContent = `${percentageDisplay}%`;

            if (currentStep < totalQuestions) {
                progressTextLabel.textContent = `QUESTION ${displayStep} OF ${totalQuestions}`;
            } else {
                 progressBarFill.style.width = `100%`;
                 progressTextLabel.textContent = `QUIZ COMPLETE`; 
            }
        }

        function renderQuestion() {
            if (currentStep >= quizData.length) {
                renderNameInputScreen();
                return;
            }

            const stepData = quizData[currentStep];
            const previousAnswer = userAnswers.find(a => a.key === stepData.key);
            selectedOption = previousAnswer ? stepData.options.find(opt => opt.text === previousAnswer.answer) : null;
            
            contentArea.innerHTML = ''; 

            const nextButtonText = currentStep === quizData.length - 1 ? 'SUBMIT' : 'CONTINUE';

            const questionBlock = document.createElement('div');
            questionBlock.className = 'animate-in';
            questionBlock.innerHTML = `
                <h2 class="text-2xl font-black uppercase leading-tight mb-8">${stepData.question}</h2>
                <div id="options-container" class="space-y-4"></div>
                <div class="flex space-x-4 mt-10">
                    <button id="back-button" class="secondary-button w-1/3 p-4 text-xl rounded-lg">
                        <span class="hidden sm:inline">GO </span>BACK
                    </button>
                    <button id="next-button" ${selectedOption ? '' : 'disabled'} class="action-button flex-grow p-4 text-xl rounded-lg">
                        ${nextButtonText}
                    </button>
                </div>
            `;
            contentArea.appendChild(questionBlock);

            const optionsContainer = document.getElementById('options-container');
            const nextButton = document.getElementById('next-button');
            const backButton = document.getElementById('back-button');

            if (currentStep === 0) backButton.classList.add('invisible');
            else backButton.addEventListener('click', handleBack);

            stepData.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = 'option-button w-full text-left p-5 rounded-lg text-lg';
                if (selectedOption && option.text === selectedOption.text) button.classList.add('selected');

                button.addEventListener('click', () => {
                    document.querySelectorAll('.option-button').forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    selectedOption = option; 
                    nextButton.disabled = false;
                });
                optionsContainer.appendChild(button);
            });
            
            nextButton.addEventListener('click', handleNext);
            updateProgress();
        }
        
        function renderNameInputScreen() {
             currentStep = quizData.length;
             updateProgress();

             contentArea.innerHTML = `
                 <div class="text-center animate-in">
                     <div class="inline-block p-3 rounded-full border-4 border-black mb-6">
                         <svg class="h-10 w-10 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                         </svg>
                     </div>
                 </div>
                 <h2 class="text-3xl font-black uppercase leading-tight mb-6 text-center italic tracking-tighter">FINALIZE YOUR RESULTS</h2>
                 <div class="animate-in bg-gray-50 border-2 border-black p-6 rounded-xl relative">
                     <div class="absolute -top-3 -right-3 w-8 h-8 bg-green-500 border-2 border-black"></div>
                     <p class="text-base font-black uppercase text-black mb-4 tracking-tighter">Enter your first name and agree to the disclaimer below to view your personalized recommendation.</p>
                     <form id="personalization-form" class="space-y-4">
                         <div>
                             <label for="client-name-input" class="block text-xs font-bold uppercase mb-1">First Name (Required)</label>
                             <input type="text" id="client-name-input" name="name" required class="custom-input block w-full p-3 bg-white" placeholder="JANE" value="${clientName === 'Warrior' ? '' : clientName}">
                         </div>
                         <div class="flex items-start">
                            <input type="checkbox" id="disclaimer-check" name="disclaimer" required class="mt-1 w-5 h-5 border-2 border-black text-green-500 bg-white rounded focus:ring-green-500">
                            <label for="disclaimer-check" class="ml-3 text-sm font-medium text-gray-700 leading-tight">
                                I have read and agree to the <a href="#disclaimer" class="font-bold underline text-black">fitness disclaimer</a> below.
                            </label>
                        </div>
                         <button type="submit" id="display-button" disabled class="action-button w-full py-4 mt-2 rounded-lg text-lg">CONFIRM</button>
                     </form>
                 </div>
             `;
             
             document.getElementById('personalization-form').addEventListener('submit', handlePersonalize);
             const nameInput = document.getElementById('client-name-input');
             const disclaimerCheck = document.getElementById('disclaimer-check');
             const confirmButton = document.getElementById('display-button');
             
             const updateButtonState = () => {
                 const isNameValid = nameInput.value.trim().length > 0;
                 const isChecked = disclaimerCheck.checked;
                 confirmButton.disabled = !(isNameValid && isChecked);
             };

             nameInput.addEventListener('input', updateButtonState);
             disclaimerCheck.addEventListener('change', updateButtonState);
             updateButtonState(); 
        }

        function renderLoadingScreen() {
             const loadingText = "ANALYZING YOUR ANSWERS...";
             contentArea.innerHTML = `
                 <div class="text-center animate-in min-h-[300px] flex flex-col items-center justify-center">
                     <div class="clean-spinner mb-6"></div> 
                     <p class="text-3xl sm:text-4xl font-black uppercase italic mb-6 leading-none text-black animate-pulse">${loadingText}</p>
                     <p class="text-lg font-medium text-gray-600">Please wait while we calculate your optimal path.</p>
                 </div>
             `;
             setTimeout(() => {
                 renderFinalProgramSummary();
                 document.getElementById('progress-text-label').scrollIntoView({ behavior: 'smooth', block: 'start' });
             }, 2500);
        }

        function renderFinalProgramSummary() {
            progressTextLabel.textContent = `ANALYSIS COMPLETE`;
            const primaryRec = getRecommendation(totalScore);
            const alternativeRec = getAlternativeRecommendation(primaryRec.title);
            const personalizedRationale = generatePersonalizedRationale(userAnswers, primaryRec.title);
            const alternativeDescriptionText = generateAlternativeDescription(primaryRec, alternativeRec); 
            const clientDisplay = clientName.toUpperCase();
            
            let step2Content;
            const primaryTitle = primaryRec.title;

            if (primaryTitle.includes(TIER_1_TITLE)) {
                step2Content = `<li><span class="font-extrabold text-black">Step 2: Apply & Consult with Coach Chris</span><span class="block text-gray-700">${markdownToHtml("Before signing up, you will need to **submit a quick application form** to share more detail about your goals. You can then **reach out directly to Coach Chris via WhatsApp** for a brief chat to ensure the program is a perfect fit.")}</span></li>`;
            } else if (primaryTitle.includes(TIER_2_TITLE)) {
                step2Content = `<li><span class="font-extrabold text-black">Step 2: Apply & Gain Access (Optional Consultation)</span><span class="block text-gray-700">${markdownToHtml("First, **submit a short application form** to share your current status. Afterward, **follow the on-screen steps** to complete your sign-up and gain immediate app access. You also have the option to **chat with Coach Chris on WhatsApp** if you have any last-minute questions.")}</span></li>`;
            } else {
                step2Content = `<li><span class="font-extrabold text-black">Step 2: Start Your Program</span><span class="block text-gray-700">${markdownToHtml(`Once you purchase the **${primaryRec.title}**, you will gain immediate access to the training app and can begin your journey straight away.`)}</span></li>`;
            }

            contentArea.innerHTML = `
                <div class="animate-in bg-gray-100 border-2 border-black p-6 rounded-xl relative space-y-5">
                    <div class="text-center pb-4 border-b border-gray-300">
                        <p class="text-lg font-extrabold uppercase text-green-600 tracking-widest mb-1">ðŸš€ YOUR RECOMMENDED PATH IS READY, ${clientDisplay}!</p>
                        <h1 class="text-4xl font-black uppercase text-black italic leading-tight">STOP GUESSING. START TRAINING WITH PURPOSE.</h1>
                    </div>
                    <div class="text-gray-800 space-y-4 text-base leading-relaxed">
                        <p>Hello ${clientDisplay},</p>
                        <p>We've analyzed your results and cut through the confusion. It's time to commit to a program that guarantees <strong class="text-green-500">exceptional</strong> results.</p>
                        <p class="text-center font-black text-xl border-y-2 border-black py-3 bg-gray-200">${markdownToHtml(`Your **BEST FIT** Recommendation:`)} <span class="block text-2xl mt-1 ${primaryRec.accentColor}">${primaryRec.title}</span></p>
                        <div class="p-4 bg-white border border-gray-300 rounded-lg">
                            <p class="font-extrabold text-black mb-2">Program Overview:</p>
                            <p class="text-gray-700">${primaryRec.briefOverview}</p>
                            <p class="mt-3 font-medium text-sm pt-3 border-t border-gray-200"><span class="font-extrabold text-black">Why this fits your profile:</span> <span class="block italic text-gray-700 mt-1">${personalizedRationale}</span></p>
                        </div>
                        <a href="${primaryRec.ctaLink}" target="_blank" class="action-button w-full flex items-center justify-center py-4 rounded-lg text-lg text-center no-underline" style="box-shadow: 4px 4px 0 0 #000;">GET THE FULL BREAKDOWN: VIEW ${primaryRec.title}</a>
                        <div class="bg-gray-200 border-2 border-gray-400 p-4 rounded-lg mt-6 text-black">
                            <h3 class="text-lg font-black uppercase mb-3 flex items-center"><svg class="w-5 h-5 mr-2 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>SUITABLE ALTERNATIVE</h3>
                            <p class="text-sm font-medium mb-3 text-gray-700">This option provides a different level of support or investment to better match your current needs:</p>
                            <div class="flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0 sm:space-x-4">
                                <div class="text-center sm:text-left flex-grow w-full sm:w-auto">
                                    <span class="block text-xl font-extrabold ${alternativeRec.accentColor} leading-tight">${alternativeRec.title}</span>
                                    <span class="block text-sm text-gray-700 mt-1 italic font-medium">${alternativeDescriptionText}</span>
                                </div>
                                <a href="${alternativeRec.ctaLink}" target="_blank" class="summary-secondary-button py-3 px-5 text-sm rounded-lg w-full sm:w-auto">VIEW DETAILS</a>
                            </div>
                        </div>
                        <h3 class="text-xl font-black uppercase pt-4 border-t border-gray-300">ACTIONABLE ADVICE</h3>
                        <p class="font-bold text-black">Success is simple, but it isn't easy. Keep these three principles in mind as you begin your journey:</p>
                        <ul class="list-disc list-outside ml-5 space-y-2">
                            <li><strong class="font-extrabold text-black">Prioritize Consistency Over Perfection:</strong> A solid session completed five times a week beats a "perfect" session done only once.</li>
                            <li><strong class="font-extrabold text-black">Master the Fundamentals:</strong> Don't get distracted by novelty. Focus on mastering foundational movements first.</li>
                            <li><strong class="font-extrabold text-black">Recovery is Key:</strong> Your body adapts and builds muscle during rest. Prioritize sleep and quality nutrition.</li>
                        </ul>
                        <h3 class="text-xl font-black uppercase pt-4 border-t border-gray-300">YOUR NEXT STEPS</h3>
                        <ol class="list-decimal list-inside space-y-3 font-medium">
                            <li><span class="font-extrabold text-black">Step 1: Explore Program Details</span><span class="block text-gray-700">Click the primary link below to review the full curriculum and pricing.</span></li>
                            ${step2Content}
                        </ol>
                    </div>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 pt-4 border-t border-gray-300 items-center justify-center">
                        <a href="${primaryRec.ctaLink}" target="_blank" class="action-button w-full sm:w-2/3 py-4 rounded-lg text-lg text-center no-underline">EXPLORE ${primaryRec.title.toUpperCase()}</a>
                        <div class="or-separator w-full sm:w-auto sm:hidden">OR</div>
                        <a href="${alternativeRec.ctaLink}" target="_blank" class="secondary-button w-full sm:w-1/3 py-4 rounded-lg text-xs sm:text-sm text-center no-underline px-2">VIEW ${alternativeRec.title.toUpperCase()}</a>
                    </div>
                    <button id="restart-button" class="secondary-button w-full py-3 mt-4 rounded-lg text-sm">RESTART QUIZ</button>
                    <p class="text-sm font-bold pt-4 text-right">â€” Coach Chris<span class="block font-medium text-xs text-gray-500">CIRCULAR ROOTS COACHING</span></p>
                </div>
            `;
            document.getElementById('restart-button').addEventListener('click', restartQuiz);
        }

        function handleNext() {
            if (selectedOption !== null) {
                const currentKey = quizData[currentStep].key;
                const existingIndex = userAnswers.findIndex(a => a.key === currentKey);
                if (existingIndex !== -1) {
                    totalScore -= userAnswers[existingIndex].score;
                    userAnswers.splice(existingIndex, 1);
                } 
                userAnswers.push({ key: currentKey, question: quizData[currentStep].question, answer: selectedOption.text, score: selectedOption.score });
                totalScore += selectedOption.score;
                currentStep++;
                document.getElementById('progress-text-label').scrollIntoView({ behavior: 'smooth', block: 'start' });
                renderQuestion();
            }
        }
        
        function handleBack() {
             currentStep = Math.max(0, currentStep - 1);
             document.getElementById('progress-text-label').scrollIntoView({ behavior: 'smooth', block: 'start' });
             renderQuestion();
        }
        
        function handlePersonalize(event) {
            event.preventDefault();
            const nameInput = document.getElementById('client-name-input');
            clientName = nameInput.value.trim().split(' ')[0];
            renderLoadingScreen();
        }
        
        function restartQuiz() {
            currentStep = 0;
            totalScore = 0;
            selectedOption = null;
            userAnswers = [];
            clientName = "Warrior";
            document.getElementById('progress-text-label').scrollIntoView({ behavior: 'smooth', block: 'start' });
            renderQuestion();
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateProgress();
            renderQuestion();
        });
    </script>
</body>
</html>
